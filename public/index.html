<!DOCTYPE html>
<html>
<head>
<title>Ljubljana</title>
</head>
<body>

<marquee direction="down" width="320" height="320" behavior="alternate">
  <marquee behavior="alternate" id="weather">
    loading
  </marquee>
  <marquee>
    <img  id="weather-icon" />
  </marquee>
</marquee>

<script>
	
	document.addEventListener("DOMContentLoaded", async () => { 
	let wEl = document.getElementById("weather")
	let wimgEl = document.getElementById("weather-icon")
	let url = `https://ljubljana.netlify.com/.netlify/functions/proxy`
	let response = await fetch(url)
	let weather = await response.json()
	let t = weather.current.temperature
	let city = weather.request.query
	wEl.innerHTML = `${city} ${t}&#8451;`
	
	let img = weather.current.weather_icons[0]
	wimgEl.src = img
})

</script>
</body>
</html>

